<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cap√≠tulo 7: Testing usando Vitest - ClutchPay</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>üí∞ ClutchPay</h1>
            <p class="subtitle">Cap√≠tulo 7: Testing usando Vitest</p>
        </div>
    </header>

    <nav class="main-nav">
        <div class="container">
            <a href="index.html">Inicio</a>
            <a href="capitulo7.html" class="active">Cap√≠tulo 7</a>
        </div>
    </nav>

    <main class="container">
        <div class="back-nav">
            <a href="index.html" class="back-btn">‚Üê Volver al √≠ndice</a>
        </div>

        <div class="chapter-content">
            <div class="chapter-header">
                <h1>Cap√≠tulo 7: Testing usando Vitest</h1>
            </div>

            <div class="video-embed">
                <iframe
                    src="https://drive.google.com/file/d/1ZpAc6rTvYDtspJ2K7KzrqjDR_ePoguqB/preview"
                    title="Video tutorial - Cap√≠tulo 7"
                    allow="autoplay; encrypted-media"
                    allowfullscreen
                ></iframe>
            </div>

            <div class="content-section">
                <h2>üìñ Contenido Completo</h2>
                <div class="markdown-body">
                    <h1>Implementaci√≥n de pruebas automatizadas</h1>
                    <p>En este tutorial se explicar√° paso a paso c√≥mo est√°n organizados los archivos de prueba en el proyecto, enfoc√°ndose en su configuraci√≥n y en c√≥mo se gestionan las pruebas de funcionalidades como la autenticaci√≥n, validaci√≥n y operaciones sobre los usuarios y base de datos.</p>
                    
                    <h2>1. Estructura de archivos de pruebas y configuraci√≥n</h2>
                    <ul>
                        <li><strong>vitest.config.mts</strong>: Configuraci√≥n global para el framework de pruebas Vitest, que permite personalizar c√≥mo se ejecutan las pruebas y qu√© herramientas adicionales o plugins se utilizan. Tambi√©n se establece la recolecci√≥n de cobertura de c√≥digo y la configuraci√≥n del entorno.</li>
                        <li><strong>tests/setup.ts</strong>: Archivo de configuraci√≥n global que se ejecuta antes de las pruebas, encargado de inicializar librer√≠as, configurar el entorno, y preparar las dependencias necesarias, como bases de datos o mocks de APIs.</li>
                        <li><strong>tests/helpers/request.ts</strong>: Contiene funciones auxiliares para realizar solicitudes HTTP durante las pruebas, gestionar la autenticaci√≥n y obtener respuestas JSON que faciliten la comprobaci√≥n de las pruebas.</li>
                        <li><strong>tests/libs/db.test.ts</strong>: Archivo dedicado a probar las operaciones CRUD sobre la base de datos, asegurando que las interacciones con la base de datos funcionen correctamente, con un enfoque en el aislamiento de pruebas mediante la limpieza de registros.</li>
                        <li><strong>tests/libs/auth.test.ts</strong>: Pruebas relacionadas con la autenticaci√≥n de usuarios, validaci√≥n de credenciales y la gesti√≥n de tokens de sesi√≥n, garantizando que los usuarios autenticados accedan solo a recursos permitidos.</li>
                        <li><strong>tests/libs/validations/helpers.test.ts</strong>: Se enfoca en las pruebas de las funciones de validaci√≥n general del sistema, como la comprobaci√≥n de formatos y reglas de datos enviados por los usuarios.</li>
                        <li><strong>tests/libs/validations/user.test.ts</strong>: Contiene pruebas de validaci√≥n espec√≠ficas para los datos de usuario, como el nombre, correo electr√≥nico, tel√©fono e imagen de perfil, asegurando que sean validados correctamente antes de ser procesados.</li>
                        <li><strong>tests/api/users/users-list.test.ts</strong>: Realiza pruebas sobre el endpoint encargado de devolver un listado paginado de usuarios, verificando que la paginaci√≥n y las restricciones de acceso est√©n correctamente implementadas.</li>
                        <li><strong>tests/api/users/user-profile.test.ts</strong>: Prueba el endpoint de perfil de usuario, asegurando que los usuarios autenticados puedan obtener y actualizar su propio perfil, con validaciones adecuadas para los datos.</li>
                        <li><strong>tests/api/auth/register.test.ts</strong>: Prueba del endpoint de registro de nuevos usuarios, verificando que se validen correctamente los datos (correo electr√≥nico, contrase√±a, etc.) y que se manejen los errores de manera adecuada.</li>
                        <li><strong>tests/api/auth/credentials.test.ts</strong>: Verifica la autenticaci√≥n de usuarios mediante correo electr√≥nico y contrase√±a, asegurando que los errores de autenticaci√≥n sean gestionados correctamente y que las contrase√±as no se filtren en las respuestas.</li>
                    </ul>
                    
                    <h2>2-12. Descripci√≥n de Archivos de Prueba</h2>
                    <p>Cada archivo de prueba tiene una funci√≥n espec√≠fica en el sistema de testing:</p>
                    <ul>
                        <li><strong>vitest.config.mts</strong>: Define c√≥mo se ejecutan las pruebas, qu√© configuraciones de entorno usar, y la recolecci√≥n de cobertura de c√≥digo.</li>
                        <li><strong>tests/setup.ts</strong>: Configura el entorno global, inicializa librer√≠as y prepara dependencias necesarias antes de ejecutar las pruebas.</li>
                        <li><strong>tests/helpers/request.ts</strong>: Facilita la creaci√≥n de solicitudes HTTP personalizadas con datos, cabeceras y autenticaci√≥n adecuados para las pruebas.</li>
                        <li><strong>tests/libs/db.test.ts</strong>: Verifica que las operaciones CRUD funcionen correctamente y asegura el aislamiento entre pruebas.</li>
                        <li><strong>tests/libs/auth.test.ts</strong>: Prueba las funcionalidades de autenticaci√≥n, manejo de tokens y gesti√≥n de sesiones.</li>
                        <li><strong>tests/libs/validations/helpers.test.ts</strong>: Verifica que las funciones de validaci√≥n general funcionen correctamente.</li>
                        <li><strong>tests/libs/validations/user.test.ts</strong>: Asegura que los datos espec√≠ficos del usuario sean validados correctamente.</li>
                        <li><strong>tests/api/users/users-list.test.ts</strong>: Verifica el correcto funcionamiento del listado de usuarios con paginaci√≥n y autorizaci√≥n.</li>
                        <li><strong>tests/api/users/user-profile.test.ts</strong>: Prueba la obtenci√≥n y actualizaci√≥n del perfil de usuario con validaciones adecuadas.</li>
                        <li><strong>tests/api/auth/register.test.ts</strong>: Verifica el registro de nuevos usuarios con validaciones correctas de datos.</li>
                        <li><strong>tests/api/auth/credentials.test.ts</strong>: Asegura que la autenticaci√≥n con credenciales funcione correctamente y maneje errores apropiadamente.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="chapter-nav">
            <div class="prev">
                <a href="capitulo6.html">
                    <span class="nav-label">‚Üê Anterior</span>
                    <span class="nav-title">Cap√≠tulo 6: Frontend de Usuarios</span>
                </a>
            </div>
            <div class="next">
                <a href="capitulo8.html">
                    <span class="nav-label">Siguiente ‚Üí</span>
                    <span class="nav-title">Cap√≠tulo 8: API Cloudinary</span>
                </a>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>üìö Material educativo para aprender desarrollo full-stack moderno</p>
            <p>Basado en el proyecto <a href="https://github.com/GCousido/ClutchPay" target="_blank">ClutchPay</a></p>
        </div>
    </footer>
</body>
</html>